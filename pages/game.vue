<template>
  <div
    class="min-h-screen bg-gray-900 text-gray-100 flex flex-col items-center p-4"
  >
    <UCard class="w-full max-w-md bg-gray-800 border-gray-700 shadow-2xl">
      <template #header>
        <h1 class="text-2xl font-bold text-center text-amber-400 tracking-wide">
          Жатва: Игра
        </h1>
        <p class="text-gray-400 text-center italic">
          Сражайтесь за власть над полями жатвы
        </p>
      </template>

      <div class="flex flex-col items-center gap-6 p-6">
        <div class="flex items-center gap-4">
          <h2 class="text-lg font-semibold text-amber-300">
            Раунд: {{ round }}
          </h2>
          <UButton
            color="amber"
            variant="solid"
            icon="i-heroicons-plus"
            @click="incrementRound"
            :disabled="round >= 10"
            class="hover:bg-amber-600 transition-colors"
          >
            {{ round == 0 ? 'Начать игру' : 'Следующий раунд' }}
          </UButton>
        </div>

        <div v-if="currentEvent" class="w-full space-y-4">
          <h3 class="text-lg font-semibold text-amber-300">Текущее событие:</h3>
          <UCard
            class="bg-gray-700 border-gray-600 hover:shadow-[0_0_15px_rgba(251,191,36,0.5)] transition-all duration-300"
          >
            <template #header>
              <h4 class="text-amber-300 font-medium">
                {{ currentEvent.title }}
              </h4>
            </template>
            <ul class="list-none space-y-2">
              <li
                v-for="action in currentEvent.actions"
                :key="action"
                class="flex items-center gap-2 text-gray-200"
              >
                <UIcon name="i-heroicons-star" class="text-amber-400" />
                {{ action }}
              </li>
            </ul>
          </UCard>
        </div>
        <p v-else class="text-gray-400 italic">
          События появятся после начала игры...
        </p>
      </div>

      <template #footer>
        <div class="text-center py-4">
          <UButton
            to="/"
            variant="outline"
            size="lg"
            color="amber"
            class="hover:bg-amber-600 hover:text-gray-100 transition-colors"
          >
            На главную
          </UButton>
        </div>
      </template>
    </UCard>
  </div>
</template>

<script setup>
import { ref } from 'vue'

// Round counter
const round = ref(0)

// Current event
const currentEvent = ref(null)

// Possible random events
const possibleEvents = [
  {
    id: 1,
    title: 'Эфирный дождь',
    actions: [
      'Добавьте 1 золото в уникальную зону.',
      'Перемещение стоит -1 для всех миниатюр с полетом.',
      'Нейтральный монстр (Здоровье 4, Атака 2, Защита 2) появляется в уникальной зоне. Победитель получает 1 победное очко.',
    ],
  },
  {
    id: 2,
    title: 'Костяной урожай',
    actions: [
      'Добавьте 2 жетона изумрудов в каждую обычную зону добычи.',
      'Все миниатюры в зонах флагов получают -1 к атаке в этом раунде.',
      'Нейтральный монстр (Здоровье 3, Атака 2, Защита 3) появляется в случайной зоне добычи. Победитель получает 1 базовый ресурс на выбор.',
    ],
  },
  {
    id: 3,
    title: 'Железный приток',
    actions: [
      'Добавьте 2 жетона железа в одну обычную зону (выбор игрока с наименьшими очками).',
      'Арбалетчики и Копьеносцы теряют 1 атаку в этом раунде.',
      'Нейтральный монстр (Здоровье 6, Атака 1, Защита 4) появляется в зоне флага (случайная). Победитель получает 1 победное очко.',
    ],
  },
  {
    id: 4,
    title: 'Лесной дар',
    actions: [
      'Добавьте 3 жетона древесины в каждую обычную зону добычи.',
      'Для добычи требуется 2 миниатюры.',
    ],
  },
  {
    id: 5,
    title: 'Кровавый прилив',
    actions: [
      'Добавьте 1 жетон базового ресурса в каждую обычную зону и 1 золота в уникальную зону.',
      'Все бои дают +1 к атаке всем сторонам.',
    ],
  },
  {
    id: 6,
    title: 'Тёмный шторм',
    actions: [
      'Добавьте 1 жетон базового ресурса (случайный тип) в каждую обычную зону.',
      'Миниатюры с дальним боем не могут атаковать в этом раунде.',
      'Нейтральный монстр (Здоровье 10, Атака 2, Защита 2) появляется в уникальной зоне. Победитель получает 1 золото.',
    ],
  },
  {
    id: 7,
    title: 'Эфирный зов',
    actions: [
      'Уникальная зона получает 2 золота, но добыча требует 3 миниатюр в этом раунде.',
      'Зоны флагов получают +1 к защите для всех миниатюр.',
    ],
  },
  {
    id: 8,
    title: 'Пепельный урожай',
    actions: [
      'Добавьте 2 жетона базовых ресурсов (случайный тип) в одну обычную зону (выбор игрока с наибольшим количеством очков).',
      'Все миниатюры в зонах добычи теряют 1 защиту (минимум 1).',
      'Пепельные стрелки имеют +1 к атаке и -1 к дальности.',
    ],
  },
  {
    id: 9,
    title: 'Звёздный дождь',
    actions: [
      'Добавьте 1 золота в уникальную зону и каждый жетон базового ресурса в каждую обычную зону.',
    ],
  },
  {
    id: 10,
    title: 'Чумной дар',
    actions: [
      'Добавьте 2 жетона базовых ресурсов в каждую обычную зону. Сквирены добывают +1 ресурс.',
      'Все миниатюры в зонах добычи теряют 1 атаку.',
      'Нейтральный монстр (Здоровье 5, Атака 3, Защита 2) появляется в случайной зоне добычи. Победитель получает 1 золота.',
    ],
  },
  {
    id: 11,
    title: 'Ледяной урожай',
    actions: [
      'Добавьте 1 жетон базового ресурса в каждую обычную зону и 1 эфирный кристалл в уникальную зону.',
      'Перемещение для всех существ без полета стоит -2.',
    ],
  },
  {
    id: 12,
    title: 'Теневая жатва',
    actions: [
      'Добавьте 2 жетона базовых ресурсов в одну обычную зону (выбор случайный).',
      'Нейтральный монстр (Здоровье 2, Атака 2, Защита 2) появляется в случайной зоне флага. Победитель получает 1 случайный базовый ресурс.',
    ],
  },
  {
    id: 13,
    title: 'Огненный приток',
    actions: [
      'Добавьте 1 жетон железа и 1 жетон древесины в каждую обычную зону.',
      'Все бои в зонах флагов дают +1 к атаке всем сторонам.',
      'Нейтральный монстр (Здоровье 4, Атака 3, Защита 3) появляется в случайной зоне добычи. Победитель получает 1 победное очко.',
    ],
  },
  {
    id: 14,
    title: 'Кровавый урожай',
    actions: [
      'Погибшая миниатюра в этом ходу роняет 1 железо.',
      'Потратьте 1 базовый ресурс, чтобы дать +2 к атаке одной миниатюре.',
    ],
  },
  {
    id: 15,
    title: 'Магический прилив',
    actions: [
      'Уникальная зона получает 1 золото, а каждая обычная зона — 1 жетон базового ресурса (случайный).',
      'Все способности, требующие золото, стоят на 1 ресурс меньше.',
      'Нейтральный монстр (Здоровье 4, Атака 1, Защита 5) появляется в уникальной зоне. Победитель получает 2 победных очка.',
    ],
  },
  {
    id: 16,
    title: 'Туманный дар',
    actions: [
      'Добавьте 2 жетона базовых ресурсов в одну обычную зону (выбор игрока с наибольшими очками).',
      'Все дальние атаки невозможны в этом раунде.',
    ],
  },
  {
    id: 17,
    title: 'Земляная жатва',
    actions: [
      'Добавьте 3 жетона базовых ресурсов в одну обычную зону (выбор случайный).',
      'Все миниатюры в зонах добычи теряют 1 атаку (минимум 1).',
    ],
  },
  {
    id: 18,
    title: 'Лунный приток',
    actions: [
      'Добавьте 1 жетон базового ресурса в каждую обычную зону и 1 золото в уникальную зону.',
      'Нейтральный монстр (Здоровье 5, Атака 3, Защита 3) появляется в случайной зоне флага. Победитель получает 1 победное очко.',
    ],
  },
  {
    id: 19,
    title: 'Проклятый урожай',
    actions: [
      'Добавьте 2 жетона базовых ресурсов в каждую обычную зону, но добыча стоит +1 победное очко.',
      'Все миниатюры с защитой 3 и выше теряют 1 защиту.',
    ],
  },
  {
    id: 20,
    title: 'Жатва хаоса',
    actions: [
      'Все игроки получают по 1 базовому ресурсу на выбор и 1 золоту.',
      'Все броски кубиков в боях удваиваются (после применения бонусов).',
    ],
  },
]

// Function to increment round and set a new random event
const incrementRound = () => {
  if (round.value < 10) {
    round.value++
    // Select a random event and replace the current one
    const randomEvent =
      possibleEvents[Math.floor(Math.random() * possibleEvents.length)]
    currentEvent.value = { ...randomEvent, id: round.value }
  }
}
</script>

<style scoped>
/* Dark fantasy styling with mystical effects */
.bg-gray-900 {
  background-image:
    linear-gradient(rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7)),
    url('https://source.unsplash.com/random/1920x1080?dark,fantasy');
  background-size: cover;
  background-position: center;
}

/* Subtle glow effect on hover for event card */
.bg-gray-700:hover {
  background-image: linear-gradient(
    rgba(251, 191, 36, 0.1),
    rgba(251, 191, 36, 0.1)
  );
}
</style>
